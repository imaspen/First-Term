#!/bin/bash
# Takes an input file extension and changes all files to another extension.

# Set argument defaults
current=''
new=''
dir=.
dir_flag=false

#Handle each arg
for arg in "$@"; do
	if [[ $dir_flag = true ]]; then
		# If the directory flag is set, read the argument as the dir and unset directory flag
		dir=$arg
		dir_flag=false
	elif [[ "$arg" =~ ^((-d)|(--directory)) ]]; then
		# If directory argument given, set the directory flag
		dir_flag=true
	elif [[ $current = '' ]]; then
		current=$arg
	elif [[ $new = '' ]]; then
		new=$arg
	fi
done
	
cd $dir

suffix='';
if [[ $new != '' ]]; then
	suffix=".$new"
fi

# Rename each file in the directory with the extension
for file in *.$current; do
	mv "$file" "${file%.$current}$suffix"
done

cd - > /dev/null
